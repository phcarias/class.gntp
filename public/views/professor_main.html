<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Professor - Sistema de Frequência Escolar</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="../style/professor_main.css?v=2" />
</head>
<body>
    <header class="cabecalho">
        <div class="lado-esquerdo-cabecalho">
            <h1>Sistema de Frequência Escolar</h1>
        </div>
        <div class="lado-direito-cabecalho">
            <span class="info-usuario">Olá, <strong>Professor João</strong></span>
            <button class="botao-sair" title="Sair">
                <span class="material-icons">logout</span>
            </button>
        </div>
    </header>

    <nav class="menu-lateral">
        <ul>
            <li class="ativo"><a href="#minhas-turmas">Minhas Turmas</a></li>
            <li><a href="#avisos">Avisos</a></li>
            <li><a href="#configuracoes">Configurações</a></li>
        </ul>
    </nav>

    <main class="conteudo-principal">
        <section id="minhas-turmas" class="secao-turmas">
            <h2>Minhas Turmas</h2>

            <div class="filtro-turmas">
                <label for="filtro-data">Filtrar por dia da aula:</label>
                <input id="filtro-data" type="date" />
                <button id="btn-filtrar" class="botao-filtrar">Filtrar</button>
                <button id="btn-limpar" class="botao-limpar">Limpar filtro</button>
                <p class="ajuda-filtro">Escolha uma data e clique em "Filtrar" para ver apenas as turmas com aula nesse dia.</p>
            </div>

            <div class="lista-turmas" id="lista-turmas">
                <article class="cartao-turma" data-days="Seg,Qua,Sex">
                    <header>
                        <h3>Matemática - 3º Ano A</h3>
                        <p><strong>Horário:</strong> Seg, Qua e Sex - 08:00 às 09:30</p>
                    </header>
                    <button class="botao-frequencia">Marcar Frequência</button>
                </article>

                <article class="cartao-turma" data-days="Ter,Qui">
                    <header>
                        <h3>História - 2º Ano B</h3>
                        <p><strong>Horário:</strong> Ter e Qui - 10:00 às 11:30</p>
                    </header>
                    <button class="botao-frequencia">Marcar Frequência</button>
                </article>

                <article class="cartao-turma" data-days="Seg,Ter">
                    <header>
                        <h3>Ciências - 1º Ano C</h3>
                        <p><strong>Horário:</strong> Seg e Ter - 13:00 às 14:30</p>
                    </header>
                    <button class="botao-frequencia">Marcar Frequência</button>
                </article>
            </div>

            <p id="nenhuma-turma" class="mensagem-nenhuma" style="display:none;">Nenhuma turma encontrada para a data selecionada.</p>
        </section>

        <section id="avisos" class="secao-avisos" style="display:none;">
            <h2>Avisos</h2>
            <p>Sem avisos no momento.</p>
        </section>

        <section id="configuracoes" class="secao-configuracoes" style="display:none;">
            <h2>Configurações</h2>
            <p>Configurações do usuário.</p>
        </section>
    </main>

    <footer class="rodape">
        <p>© 2024 Sistema de Frequência Escolar - Todos os direitos reservados</p>
    </footer>

    <script>
        const weekdayMap = {0:'Dom',1:'Seg',2:'Ter',3:'Qua',4:'Qui',5:'Sex',6:'Sab'};
        const btnFiltrar = document.getElementById('btn-filtrar');
        const btnLimpar = document.getElementById('btn-limpar');
        const inputData = document.getElementById('filtro-data');
        const listaTurmas = document.getElementById('lista-turmas');
        const nenhumaTurma = document.getElementById('nenhuma-turma');

        function mostrarTodasTurmas() {
            listaTurmas.querySelectorAll('.cartao-turma').forEach(c => c.style.display = '');
            nenhumaTurma.style.display = 'none';
        }

        function filtrarPorData(dataIso) {
            if (!dataIso) { mostrarTodasTurmas(); return; }
            const d = new Date(dataIso + 'T00:00:00');
            const abreviacao = weekdayMap[d.getDay()];
            const cards = Array.from(listaTurmas.querySelectorAll('.cartao-turma'));
            let encontrados = 0;
            cards.forEach(card => {
                const days = (card.getAttribute('data-days') || '').split(',').map(s => s.trim());
                if (days.includes(abreviacao)) { card.style.display = ''; encontrados++; }
                else { card.style.display = 'none'; }
            });
            nenhumaTurma.style.display = encontrados === 0 ? '' : 'none';
        }

        btnFiltrar.addEventListener('click', () => filtrarPorData(inputData.value));
        btnLimpar.addEventListener('click', () => { inputData.value = ''; mostrarTodasTurmas(); });
        inputData.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); filtrarPorData(inputData.value); } });
    </script>
</body>
</html>